# Capacity Analysis Usage Reports

This document provides more details about the usage reports generated by the Capacity Analysis scripts.

These reports are generated by the `generate_reports.py` script which is a wrapper to generate all of the reports.  That script will look in the `output` directory for the daily Instances and Hosts CSV files.  For example, on 22-APR-2025 it will look for the following files:

* `Instances-20250422.csv`
* `Hosts-20250422.csv`

It will generate all reports into the same `output` directory.

These reports are uploaded to the [ExpansionScheduleOverviews](https://ibm.ent.box.com/folder/248001759947) folder in Box.

## `internal-external-gpu-usage-2.csv`

The `internal-external-gpu-usage-2.csv` report shows GPU usage for the whole cloud.  The data looks like this:

| Region | Profile Type | Internal Direct | External Direct | Internal ROKS | External ROKS | Available GPUs | Total GPUs |
|---|---|---|---|---|---|---|---|
| au-syd | h100 | 0 | 0 | 104 | 0 | 0 | 104 |
| au-syd | h200 | 0 | 0 | 40 | 0 | 0 | 40 |
| au-syd | l4 | 2 | 0 | 22 | 4 | 20 | 48 |
| au-syd | l40s | 1 | 0 | 45 | 2 | 22 | 70 |

The columns show the following data:

| Name | Description |
|---|---|
| Region | The region for the row | 
| Profile Type | The type of GPU profile | 
| Internal Direct | The number of GPUs that are in use by direct provisioning via IBM internal accounts | 
| External Direct | The number of GPUs that are in use by direct provisioning via external accounts | 
| Internal ROKS | The number of GPUs that are in use through ROKS via IBM internal accounts | 
| External ROKS | The number of GPUs that are in use through ROKS via external accounts | 
| Available GPUs | The number of GPUs for this type and region that are available to sell | 
| Total GPUs | The total number of GPUs that are available to sell in this region | 

### Notes about the data

* This report only shows GPUs that are available to sell.  That means it doesn't include any that are offline, being repaired, or tainted for any reason.
* This report doesn't show any GPU capacity that is held specifically for IBM Research

## `watsonx_gpu_usage.csv` and other usage reports

The `watsonx_gpu_usage.csv` report and other usage reports show the GPU usage for specific sets of accounts.  These are driven by a list of well-known account numbers for the specific report.  The data looks like this:

| Region | Server Type | Total Servers | Total GPUs |
|---|---|---|---|
| au-syd | 2xl4 | 7 | 14 |
| au-syd | 2xl40s | 22 | 44 |
| au-syd | h100 | 13 | 104 |
| au-syd | h200 | 5 | 40 |

The columns show the following data:

| Name | Description |
|---|---|
| Region | The region for the row | 
| Server Type | The type of server the account is using | 
| Total Servers | The total number of servers the account is using | 
| Total GPUs | The total number of GPUs the account is using | 

### Notes about the data

* The server type corresponds to the virtual server type and not the physical server type.  For example, L40s usage will be split into `2xl40s` and `1xl40s` since this report is showing VSIs.
* The number of total servers and total GPUs don't always match exactly if the account is using only part of the server.  For example, if the account is using a single `1xl40s` VSI then they count as using a server even though they are only using part of the server.

## `gpu_stats.xlsx`

The `gpu_stats.xlsx` report rolls up data from all the other reports to combine it into a single spreadsheet with the exact data for the weekly executive report.  The data in this report is generated from the other reports.  It contains the following tabs:

* `Watsonx GPU Utilization` shows the utilization for the Watsonx.ai team
* `L4 GPU Utilization` and the other GPU utilization tabs show the utilization of specific GPU types across regions and by usage type
